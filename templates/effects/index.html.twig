{% extends 'base.html.twig' %}

{% block title %}Buffs, Debuffs & Disables - Godforge{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: linear-gradient(135deg, rgba(10, 14, 39, 0.95) 0%, rgba(26, 31, 58, 0.95) 100%);
            min-height: 100vh;
            padding-top: 100px;
        }

        .effects-page {
            padding: 50px 20px;
            max-width: 1600px;
            margin: 0 auto;
        }

        /* Page Header */
        .page-header {
            text-align: center;
            margin-bottom: 50px;
        }

        .page-title {
            font-size: 3.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .page-subtitle {
            color: rgba(255, 255, 255, 0.6);
            font-size: 1.2rem;
        }

        /* Section Header */
        .effects-section {
            margin-bottom: 60px;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            border: 2px solid rgba(255, 215, 0, 0.3);
        }

        .section-icon {
            font-size: 2.5rem;
            filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.5));
        }

        .section-title {
            font-size: 2.2rem;
            font-weight: 700;
            color: #ffd700;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .section-count {
            margin-left: auto;
            background: rgba(255, 215, 0, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            color: #ffd700;
            font-weight: 600;
        }

        /* Effects Grid */
        .effects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 20px;
        }

        /* Effect Card */
        .effect-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border-radius: 15px;
            border: 2px solid rgba(255, 215, 0, 0.2);
            padding: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .effect-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, transparent, #ffd700, transparent);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .effect-card:hover {
            transform: translateY(-5px);
            border-color: rgba(255, 215, 0, 0.6);
            box-shadow: 0 10px 30px rgba(255, 215, 0, 0.3);
        }

        .effect-card:hover::before {
            opacity: 1;
        }

        /* Variants de cartes */
        .buff-card {
            border-color: rgba(76, 175, 80, 0.3);
        }

        .buff-card:hover {
            border-color: rgba(76, 175, 80, 0.6);
            box-shadow: 0 10px 30px rgba(76, 175, 80, 0.3);
        }

        .buff-card::before {
            background: linear-gradient(90deg, transparent, #4caf50, transparent);
        }

        .debuff-card {
            border-color: rgba(244, 67, 54, 0.3);
        }

        .debuff-card:hover {
            border-color: rgba(244, 67, 54, 0.6);
            box-shadow: 0 10px 30px rgba(244, 67, 54, 0.3);
        }

        .debuff-card::before {
            background: linear-gradient(90deg, transparent, #f44336, transparent);
        }

        .disable-card {
            border-color: rgba(255, 152, 0, 0.3);
        }

        .disable-card:hover {
            border-color: rgba(255, 152, 0, 0.6);
            box-shadow: 0 10px 30px rgba(255, 152, 0, 0.3);
        }

        .disable-card::before {
            background: linear-gradient(90deg, transparent, #ff9800, transparent);
        }

        /* Effect Header */
        .effect-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }

        .effect-icon-container {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 2px solid rgba(255, 215, 0, 0.3);
            flex-shrink: 0;
        }

        .effect-icon-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 10px;
        }

        .effect-icon-placeholder {
            font-size: 2rem;
            filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.5));
        }

        .effect-name {
            font-size: 1.3rem;
            font-weight: 700;
            color: #ffd700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Effect Levels */
        .effect-levels {
            margin-top: 15px;
        }

        .effect-level {
            margin-bottom: 12px;
            padding-left: 15px;
            border-left: 3px solid rgba(255, 215, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* ‚úÖ Style pour l'ic√¥ne de niveau */
        .level-icon {
            width: 32px;
            height: 32px;
            object-fit: cover;
            border-radius: 6px;
            border: 2px solid rgba(255, 215, 0, 0.4);
            flex-shrink: 0;
        }

        .level-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 28px;
            height: 28px;
            background: rgba(255, 215, 0, 0.2);
            color: #ffd700;
            border-radius: 50%;
            font-weight: 700;
            font-size: 0.85rem;
            border: 2px solid rgba(255, 215, 0, 0.4);
            flex-shrink: 0;
        }

        .level-text {
            color: rgba(255, 255, 255, 0.85);
            font-size: 0.95rem;
            line-height: 1.6;
            flex: 1;
        }

        /* Effect Description (sans niveaux) */
        .effect-description {
            color: rgba(255, 255, 255, 0.85);
            font-size: 0.95rem;
            line-height: 1.7;
            margin-top: 10px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border-left: 3px solid rgba(255, 215, 0, 0.3);
        }

        /* Type Badge */
        .type-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 10px;
        }

        .type-buff {
            background: rgba(76, 175, 80, 0.2);
            color: #4caf50;
        }

        .type-debuff {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
        }

        .type-disable {
            background: rgba(255, 152, 0, 0.2);
            color: #ff9800;
        }

        /* Empty State */
        .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 60px 20px;
            color: rgba(255, 255, 255, 0.5);
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .empty-state-text {
            font-size: 1.2rem;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .page-title {
                font-size: 2.5rem;
            }

            .effects-grid {
                grid-template-columns: 1fr;
            }

            .section-header {
                flex-direction: column;
                text-align: center;
            }

            .section-count {
                margin-left: 0;
            }
        }

        /* Animation de chargement */
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }

        .effect-card.loading {
            animation: pulse 1.5s infinite;
        }

        /* Scrollbar personnalis√©e */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 215, 0, 0.3);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 215, 0, 0.5);
        }
    </style>
{% endblock %}

{% block body %}
<div class="effects-page">
    {# Page Header #}
    <div class="page-header">
        <h1 class="page-title">‚öîÔ∏è Godforge Buffs, Debuffs, and Disables</h1>
        <p class="page-subtitle">Ma√Ætrisez tous les effets de statut du jeu</p>
    </div>

    {# Buffs Section #}
    <section class="effects-section">
        <div class="section-header">
            <span class="section-icon">‚ú®</span>
            <h2 class="section-title">Buffs</h2>
            <span class="section-count">{{ buffs|length }} effets</span>
        </div>

        <div class="effects-grid">
            {% for buff in buffs %}
                <div class="effect-card buff-card">
                    <div class="effect-header">
                        <div class="effect-icon-container">
                            {# ‚úÖ Ic√¥ne principale (premi√®re ic√¥ne disponible ou placeholder) #}
                            {% if buff.iconUrlLevel1 %}
                                <img src="{{ buff.iconUrlLevel1 }}" alt="{{ buff.name }}" class="effect-icon-image">
                            {% elseif buff.iconUrl %}
                                <img src="{{ buff.iconUrl }}" alt="{{ buff.name }}" class="effect-icon-image">
                            {% else %}
                                <span class="effect-icon-placeholder">‚ú®</span>
                            {% endif %}
                        </div>
                        <h3 class="effect-name">{{ buff.name }}</h3>
                    </div>

                    {% if buff.hasMultipleLevels %}
                        <div class="effect-levels">
                            {# ‚úÖ Niveau I avec son ic√¥ne #}
                            {% if buff.level1 %}
                                <div class="effect-level">
                                    {% if buff.iconUrlLevel1 %}
                                        <img src="{{ buff.iconUrlLevel1 }}" alt="Level I" class="level-icon">
                                    {% endif %}
                                    <span class="level-badge">I</span>
                                    <span class="level-text">{{ buff.level1 }}</span>
                                </div>
                            {% endif %}

                            {# ‚úÖ Niveau II avec son ic√¥ne #}
                            {% if buff.level2 %}
                                <div class="effect-level">
                                    {% if buff.iconUrlLevel2 %}
                                        <img src="{{ buff.iconUrlLevel2 }}" alt="Level II" class="level-icon">
                                    {% endif %}
                                    <span class="level-badge">II</span>
                                    <span class="level-text">{{ buff.level2 }}</span>
                                </div>
                            {% endif %}

                            {# ‚úÖ Niveau III avec son ic√¥ne #}
                            {% if buff.level3 %}
                                <div class="effect-level">
                                    {% if buff.iconUrlLevel3 %}
                                        <img src="{{ buff.iconUrlLevel3 }}" alt="Level III" class="level-icon">
                                    {% endif %}
                                    <span class="level-badge">III</span>
                                    <span class="level-text">{{ buff.level3 }}</span>
                                </div>
                            {% endif %}
                        </div>
                    {% elseif buff.description %}
                        <div class="effect-description">
                            {{ buff.description }}
                        </div>
                    {% endif %}

                    <span class="type-badge type-buff">Buff</span>
                </div>
            {% else %}
                <div class="empty-state">
                    <div class="empty-state-icon">‚ú®</div>
                    <p class="empty-state-text">Aucun buff disponible</p>
                </div>
            {% endfor %}
        </div>
    </section>

    {# Debuffs Section #}
    <section class="effects-section">
        <div class="section-header">
            <span class="section-icon">üíÄ</span>
            <h2 class="section-title">Debuffs</h2>
            <span class="section-count">{{ debuffs|length }} effets</span>
        </div>

        <div class="effects-grid">
            {% for debuff in debuffs %}
                <div class="effect-card debuff-card">
                    <div class="effect-header">
                        <div class="effect-icon-container">
                            {# ‚úÖ Ic√¥ne principale #}
                            {% if debuff.iconUrlLevel1 %}
                                <img src="{{ debuff.iconUrlLevel1 }}" alt="{{ debuff.name }}" class="effect-icon-image">
                            {% elseif debuff.iconUrl %}
                                <img src="{{ debuff.iconUrl }}" alt="{{ debuff.name }}" class="effect-icon-image">
                            {% else %}
                                <span class="effect-icon-placeholder">üíÄ</span>
                            {% endif %}
                        </div>
                        <h3 class="effect-name">{{ debuff.name }}</h3>
                    </div>

                    {% if debuff.hasMultipleLevels %}
                        <div class="effect-levels">
                            {# ‚úÖ Niveau I avec son ic√¥ne #}
                            {% if debuff.level1 %}
                                <div class="effect-level">
                                    {% if debuff.iconUrlLevel1 %}
                                        <img src="{{ debuff.iconUrlLevel1 }}" alt="Level I" class="level-icon">
                                    {% endif %}
                                    <span class="level-badge">I</span>
                                    <span class="level-text">{{ debuff.level1 }}</span>
                                </div>
                            {% endif %}

                            {# ‚úÖ Niveau II avec son ic√¥ne #}
                            {% if debuff.level2 %}
                                <div class="effect-level">
                                    {% if debuff.iconUrlLevel2 %}
                                        <img src="{{ debuff.iconUrlLevel2 }}" alt="Level II" class="level-icon">
                                    {% endif %}
                                    <span class="level-badge">II</span>
                                    <span class="level-text">{{ debuff.level2 }}</span>
                                </div>
                            {% endif %}

                            {# ‚úÖ Niveau III avec son ic√¥ne #}
                            {% if debuff.level3 %}
                                <div class="effect-level">
                                    {% if debuff.iconUrlLevel3 %}
                                        <img src="{{ debuff.iconUrlLevel3 }}" alt="Level III" class="level-icon">
                                    {% endif %}
                                    <span class="level-badge">III</span>
                                    <span class="level-text">{{ debuff.level3 }}</span>
                                </div>
                            {% endif %}
                        </div>
                    {% elseif debuff.description %}
                        <div class="effect-description">
                            {{ debuff.description }}
                        </div>
                    {% endif %}

                    <span class="type-badge type-debuff">Debuff</span>
                </div>
            {% else %}
                <div class="empty-state">
                    <div class="empty-state-icon">üíÄ</div>
                    <p class="empty-state-text">Aucun debuff disponible</p>
                </div>
            {% endfor %}
        </div>
    </section>

    {# Disables Section #}
    <section class="effects-section">
        <div class="section-header">
            <span class="section-icon">üö´</span>
            <h2 class="section-title">Disables</h2>
            <span class="section-count">{{ disables|length }} effets</span>
        </div>

        <div class="effects-grid">
            {% for disable in disables %}
                <div class="effect-card disable-card">
                    <div class="effect-header">
                        <div class="effect-icon-container">
                            {# ‚úÖ Ic√¥ne unique (les disables n'ont g√©n√©ralement pas de niveaux) #}
                            {% if disable.iconUrl %}
                                <img src="{{ disable.iconUrl }}" alt="{{ disable.name }}" class="effect-icon-image">
                            {% else %}
                                <span class="effect-icon-placeholder">üö´</span>
                            {% endif %}
                        </div>
                        <h3 class="effect-name">{{ disable.name }}</h3>
                    </div>

                    {% if disable.description %}
                        <div class="effect-description">
                            {{ disable.description }}
                        </div>
                    {% endif %}

                    <span class="type-badge type-disable">Disable</span>
                </div>
            {% else %}
                <div class="empty-state">
                    <div class="empty-state-icon">üö´</div>
                    <p class="empty-state-text">Aucun disable disponible</p>
                </div>
            {% endfor %}
        </div>
    </section>
</div>
{% endblock %}
